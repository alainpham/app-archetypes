{
  "annotations": {
    "list": [
      {
        "datasource": {
          "type": "loki",
          "uid": "${loki_datasource}"
        },
        "enable": true,
        "expr": "{job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\", transport=\"kernel\", level=\"emerg\"}",
        "hide": true,
        "iconColor": "light-purple",
        "name": "Critical system event",
        "tagKeys": "cluster,job,instance,level",
        "titleFormat": "Critical system event"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "${prometheus_datasource}"
        },
        "enable": true,
        "expr": "changes(\nsum by (instance) (\n    group by (instance,release) (node_uname_info{job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"})\n    )\n[$__interval:1m] offset -$__interval) > 1\n",
        "hide": true,
        "iconColor": "light-blue",
        "name": "Kernel update",
        "step": "5m",
        "tagKeys": "cluster,job,instance",
        "textFormat": "",
        "titleFormat": "Kernel update"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "${prometheus_datasource}"
        },
        "enable": true,
        "expr": "increase(node_vmstat_oom_kill{job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}[$__interval:] offset -$__interval)",
        "hide": true,
        "iconColor": "light-purple",
        "name": "OOMkill",
        "tagKeys": "cluster,job,instance",
        "textFormat": "",
        "titleFormat": "OOMkill"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "${prometheus_datasource}"
        },
        "enable": true,
        "expr": "node_boot_time_seconds{job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}*1000 > $__from < $__to",
        "hide": true,
        "iconColor": "light-yellow",
        "name": "Reboot",
        "tagKeys": "cluster,job,instance",
        "titleFormat": "Reboot",
        "useValueForTime": "on"
      },
      {
        "datasource": {
          "type": "loki",
          "uid": "${loki_datasource}"
        },
        "enable": true,
        "expr": "{job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\", unit=\"init.scope\"} |= \"code=exited, status=1/FAILURE\"",
        "hide": true,
        "iconColor": "light-orange",
        "name": "Service failed",
        "tagKeys": "cluster,job,instance,level",
        "titleFormat": "Service failed"
      },
      {
        "datasource": {
          "type": "loki",
          "uid": "${loki_datasource}"
        },
        "enable": true,
        "expr": "{job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\", unit=\"systemd-logind.service\"}|= \"New session\"",
        "hide": true,
        "name": "Session closed",
        "tagKeys": "cluster,job,instance,level",
        "titleFormat": "Session closed"
      },
      {
        "datasource": {
          "type": "loki",
          "uid": "${loki_datasource}"
        },
        "enable": true,
        "expr": "{job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\", unit=\"systemd-logind.service\"}|= \"New session\"",
        "hide": true,
        "name": "Session opened",
        "tagKeys": "cluster,job,instance,level",
        "titleFormat": "Session opened"
      }
    ]
  },
  "editable": false,
  "id": 217,
  "links": [
    {
      "keepTime": true,
      "title": "Back to Linux node / fleet",
      "type": "link",
      "url": "/d/node-fleet"
    },
    {
      "asDropdown": true,
      "includeVars": true,
      "keepTime": true,
      "tags": [
        "linux-node-integration"
      ],
      "title": "All Linux node /  dashboards",
      "type": "dashboards"
    }
  ],
  "panels": [
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 0,
        "x": 0,
        "y": 0
      },
      "id": 1,
      "panels": [],
      "title": "Overview",
      "type": "row"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${prometheus_datasource}"
      },
      "description": "The duration of time that has passed since the last reboot or system start.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "text",
            "mode": "thresholds"
          },
          "decimals": 1,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "orange",
                "value": null
              },
              {
                "color": "text",
                "value": 600
              }
            ]
          },
          "unit": "dtdurations"
        }
      },
      "gridPos": {
        "h": 2,
        "w": 6,
        "x": 0,
        "y": 1
      },
      "id": 2,
      "options": {
        "colorMode": "value",
        "graphMode": "none",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "pluginVersion": "v11.0.0",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "time() - node_boot_time_seconds{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}"
        }
      ],
      "title": "Uptime",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${prometheus_datasource}"
      },
      "description": "System's hostname.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "text",
            "mode": "fixed"
          }
        }
      },
      "gridPos": {
        "h": 2,
        "w": 6,
        "x": 6,
        "y": 1
      },
      "id": 3,
      "options": {
        "colorMode": "fixed",
        "graphMode": "none",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "/^nodename$/"
        }
      },
      "pluginVersion": "v11.0.0",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "node_uname_info{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}",
          "format": "table"
        }
      ],
      "title": "Hostname",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${prometheus_datasource}"
      },
      "description": "Kernel version of linux host.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "text",
            "mode": "fixed"
          }
        }
      },
      "gridPos": {
        "h": 2,
        "w": 6,
        "x": 12,
        "y": 1
      },
      "id": 4,
      "options": {
        "colorMode": "fixed",
        "graphMode": "none",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "/^release$/"
        }
      },
      "pluginVersion": "v11.0.0",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "node_uname_info{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}",
          "format": "table"
        }
      ],
      "title": "Kernel version",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${prometheus_datasource}"
      },
      "description": "Operating system",
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "text",
            "mode": "fixed"
          }
        }
      },
      "gridPos": {
        "h": 2,
        "w": 6,
        "x": 18,
        "y": 1
      },
      "id": 5,
      "options": {
        "colorMode": "fixed",
        "graphMode": "none",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "/^pretty_name$/"
        }
      },
      "pluginVersion": "v11.0.0",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "node_os_info{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}\n",
          "format": "table"
        }
      ],
      "title": "OS",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${prometheus_datasource}"
      },
      "description": "CPU count is the number of processor cores or central processing units (CPUs) in a computer,\ndetermining its processing capability and ability to handle tasks concurrently.\n",
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "text",
            "mode": "fixed"
          },
          "unit": "none"
        }
      },
      "gridPos": {
        "h": 2,
        "w": 6,
        "x": 0,
        "y": 3
      },
      "id": 6,
      "options": {
        "colorMode": "fixed",
        "graphMode": "none",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "pluginVersion": "v11.0.0",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "count without (cpu) (node_cpu_seconds_total{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\", mode=\"idle\"})",
          "legendFormat": "Cores"
        }
      ],
      "title": "CPU count",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${prometheus_datasource}"
      },
      "description": "Amount of random-access memory (RAM) installed.\nIt represents the system's available working memory that applications and the operating system use to perform tasks.\nA higher memory total generally leads to better system performance and the ability to run more demanding applications and processes simultaneously.\n",
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "text",
            "mode": "fixed"
          },
          "unit": "bytes"
        }
      },
      "gridPos": {
        "h": 2,
        "w": 6,
        "x": 6,
        "y": 3
      },
      "id": 7,
      "options": {
        "colorMode": "fixed",
        "graphMode": "none",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "pluginVersion": "v11.0.0",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "node_memory_MemTotal_bytes{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}",
          "legendFormat": "Memory total"
        }
      ],
      "title": "Memory total",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${prometheus_datasource}"
      },
      "description": "Total swap available.\n\nSwap is a space on a storage device (usually a dedicated swap partition or a swap file) \nused as virtual memory when the physical RAM (random-access memory) is fully utilized.\nSwap space helps prevent memory-related performance issues by temporarily transferring less-used data from RAM to disk,\nfreeing up physical memory for active processes and applications.\n",
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "text",
            "mode": "fixed"
          },
          "unit": "bytes"
        }
      },
      "gridPos": {
        "h": 2,
        "w": 6,
        "x": 12,
        "y": 3
      },
      "id": 8,
      "options": {
        "colorMode": "fixed",
        "graphMode": "none",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "pluginVersion": "v11.0.0",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "node_memory_SwapTotal_bytes{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}"
        }
      ],
      "title": "Total swap",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${prometheus_datasource}"
      },
      "description": "Total capacity on the primary mount point /.\n",
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "text",
            "mode": "fixed"
          },
          "unit": "bytes"
        }
      },
      "gridPos": {
        "h": 2,
        "w": 6,
        "x": 18,
        "y": 3
      },
      "id": 9,
      "options": {
        "colorMode": "fixed",
        "graphMode": "none",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "pluginVersion": "v11.0.0",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "node_filesystem_size_bytes{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\", mountpoint=\"/\", fstype!=\"rootfs\"}"
        }
      ],
      "title": "Root mount size",
      "type": "stat"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 0,
        "x": 0,
        "y": 5
      },
      "id": 10,
      "panels": [],
      "title": "CPU",
      "type": "row"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${prometheus_datasource}"
      },
      "description": "Total CPU utilization percent is a metric that indicates the overall level of central processing unit (CPU) usage in a computer system.\nIt represents the combined load placed on all CPU cores or processors.\n\nFor instance, if the total CPU utilization percent is 50%, it means that,\non average, half of the CPU's processing capacity is being used to execute tasks. A higher percentage indicates that the CPU is working more intensively, potentially leading to system slowdowns if it remains consistently high.\n",
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "text",
            "mode": "continuous-BlYlRd"
          },
          "decimals": 1,
          "max": 100,
          "min": 0,
          "unit": "percent"
        }
      },
      "gridPos": {
        "h": 6,
        "w": 6,
        "x": 0,
        "y": 6
      },
      "id": 11,
      "options": {
        "colorMode": "value",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "pluginVersion": "v11.0.0",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "(((count by (instance) (count(node_cpu_seconds_total{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}) by (cpu, instance))) \n- \nsum by (instance) (sum by (instance, mode)(irate(node_cpu_seconds_total{asserts_env=~\"$env\", asserts_site=~\"$site\", mode=~'idle|iowait|steal',job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}[$__rate_interval])))) * 100) \n/ \ncount by(instance) (count(node_cpu_seconds_total{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}) by (cpu, instance))\n",
          "legendFormat": "CPU usage"
        }
      ],
      "title": "CPU usage",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${prometheus_datasource}"
      },
      "description": "Total CPU utilization percent is a metric that indicates the overall level of central processing unit (CPU) usage in a computer system.\nIt represents the combined load placed on all CPU cores or processors.\n\nFor instance, if the total CPU utilization percent is 50%, it means that,\non average, half of the CPU's processing capacity is being used to execute tasks. A higher percentage indicates that the CPU is working more intensively, potentially leading to system slowdowns if it remains consistently high.\n",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "continuous-BlYlRd"
          },
          "custom": {
            "fillOpacity": 30,
            "gradientMode": "scheme",
            "lineInterpolation": "smooth",
            "lineWidth": 2,
            "showPoints": "never"
          },
          "decimals": 1,
          "max": 100,
          "min": 0,
          "unit": "percent"
        }
      },
      "gridPos": {
        "h": 6,
        "w": 12,
        "x": 6,
        "y": 6
      },
      "id": 12,
      "options": {
        "legend": {
          "calcs": [],
          "displayMode": "list"
        },
        "tooltip": {
          "mode": "multi",
          "sort": "desc"
        }
      },
      "pluginVersion": "v11.0.0",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "(100 - sum without (mode) (rate(node_cpu_seconds_total{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\", mode=~\"idle|iowait|steal\"}[$__rate_interval])) * 100 )\n",
          "legendFormat": "CPU {{cpu}}"
        }
      ],
      "title": "CPU usage",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${prometheus_datasource}"
      },
      "description": "System load average over the previous 1, 5, and 15 minute ranges.\n\nA measurement of how many processes are waiting for CPU cycles. The maximum number is the number of CPU cores for the node.\n",
      "fieldConfig": {
        "defaults": {
          "custom": {
            "fillOpacity": 0,
            "gradientMode": "opacity",
            "lineInterpolation": "smooth",
            "lineWidth": 2,
            "showPoints": "never"
          },
          "min": 0,
          "unit": "short"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byRegexp",
              "options": "Cores"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "light-orange",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.fillOpacity",
                "value": 0
              },
              {
                "id": "custom.lineStyle",
                "value": {
                  "dash": [
                    10,
                    10
                  ],
                  "fill": "dash"
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 6,
        "w": 6,
        "x": 18,
        "y": 6
      },
      "id": 13,
      "options": {
        "legend": {
          "calcs": [],
          "displayMode": "list"
        },
        "tooltip": {
          "mode": "multi",
          "sort": "desc"
        }
      },
      "pluginVersion": "v11.0.0",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "node_load1{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}",
          "legendFormat": "1m"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "node_load5{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}",
          "legendFormat": "5m"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "node_load15{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}",
          "legendFormat": "15m"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "count without (cpu) (node_cpu_seconds_total{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\", mode=\"idle\"})",
          "legendFormat": "Cores"
        }
      ],
      "title": "Load average",
      "type": "timeseries"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 0,
        "x": 0,
        "y": 12
      },
      "id": 14,
      "panels": [],
      "title": "Memory",
      "type": "row"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${prometheus_datasource}"
      },
      "description": "RAM (random-access memory) currently in use by the operating system and running applications, in percent.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "fixedColor": "text",
            "mode": "continuous-BlYlRd"
          },
          "decimals": 1,
          "max": 100,
          "min": 0,
          "unit": "percent"
        }
      },
      "gridPos": {
        "h": 6,
        "w": 6,
        "x": 0,
        "y": 13
      },
      "id": 15,
      "options": {
        "colorMode": "value",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "pluginVersion": "v11.0.0",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "100 -\n(\n  avg by (instance) (node_memory_MemAvailable_bytes{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}) /\n  avg by (instance) (node_memory_MemTotal_bytes{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"})\n* 100\n)\n"
        }
      ],
      "title": "Memory usage",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${prometheus_datasource}"
      },
      "description": "- Used: The amount of physical memory currently in use by the system.\n- Cached: The amount of physical memory used for caching data from disk. The Linux kernel uses available memory to cache data that is read from or written to disk. This helps speed up disk access times.\n- Free: The amount of physical memory that is currently not in use.\n- Buffers: The amount of physical memory used for temporary storage of data being transferred between devices or applications.\n- Available: The amount of physical memory that is available for use by applications. This takes into account memory that is currently being used for caching but can be freed up if needed.\n",
      "fieldConfig": {
        "defaults": {
          "custom": {
            "fillOpacity": 30,
            "gradientMode": "opacity",
            "lineInterpolation": "smooth",
            "lineWidth": 2,
            "showPoints": "never"
          },
          "min": 0,
          "unit": "bytes"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byRegexp",
              "options": ".*(T|t)otal.*"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "light-orange",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.fillOpacity",
                "value": 0
              },
              {
                "id": "custom.lineStyle",
                "value": {
                  "dash": [
                    10,
                    10
                  ],
                  "fill": "dash"
                }
              }
            ]
          },
          {
            "__systemRef": "hideSeriesFrom",
            "matcher": {
              "id": "byNames",
              "options": {
                "mode": "exclude",
                "names": [
                  "Memory total",
                  "Memory used"
                ],
                "prefix": "All except:",
                "readOnly": true
              }
            },
            "properties": [
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": false,
                  "tooltip": false,
                  "viz": true
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 6,
        "w": 18,
        "x": 6,
        "y": 13
      },
      "id": 16,
      "options": {
        "legend": {
          "calcs": [],
          "displayMode": "list"
        },
        "tooltip": {
          "mode": "multi",
          "sort": "desc"
        }
      },
      "pluginVersion": "v11.0.0",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "(\n  node_memory_MemTotal_bytes{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}\n-\n  node_memory_MemFree_bytes{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}\n-\n  node_memory_Buffers_bytes{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}\n-\n  node_memory_Cached_bytes{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}\n)\n",
          "legendFormat": "Memory used"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "node_memory_Cached_bytes{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}",
          "legendFormat": "Memory cached"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "node_memory_MemAvailable_bytes{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}",
          "legendFormat": "Memory available"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "node_memory_Buffers_bytes{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}",
          "legendFormat": "Memory buffers"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "node_memory_MemFree_bytes{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}",
          "legendFormat": "Memory free"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "node_memory_MemTotal_bytes{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}",
          "legendFormat": "Memory total"
        }
      ],
      "title": "Memory usage",
      "type": "timeseries"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 0,
        "x": 0,
        "y": 19
      },
      "id": 17,
      "panels": [],
      "title": "Disk",
      "type": "row"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${prometheus_datasource}"
      },
      "description": "Disk read/writes in bytes per second.",
      "fieldConfig": {
        "defaults": {
          "custom": {
            "fillOpacity": 1,
            "gradientMode": "opacity",
            "lineInterpolation": "smooth",
            "lineWidth": 2,
            "showPoints": "never"
          },
          "unit": "Bps"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byRegexp",
              "options": "/time|used|busy|util/"
            },
            "properties": [
              {
                "id": "custom.axisSoftMax",
                "value": 100
              },
              {
                "id": "custom.drawStyle",
                "value": "points"
              },
              {
                "id": "unit",
                "value": "percent"
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 20
      },
      "id": 18,
      "options": {
        "legend": {
          "calcs": [],
          "displayMode": "list"
        },
        "tooltip": {
          "mode": "multi",
          "sort": "desc"
        }
      },
      "pluginVersion": "v11.0.0",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "irate(node_disk_read_bytes_total{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\", device!=\"\"}[$__rate_interval])",
          "legendFormat": "{{ device }} read"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "irate(node_disk_written_bytes_total{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\", device!=\"\"}[$__rate_interval])",
          "legendFormat": "{{ device }} written"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "irate(node_disk_io_time_seconds_total{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\", device!=\"\"}[$__rate_interval])",
          "legendFormat": "{{ device }} io util"
        }
      ],
      "title": "Disk reads/writes",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${prometheus_datasource}"
      },
      "description": "Disk utilisation in percent, by mountpoint. Some duplication can occur if the same filesystem is mounted in multiple locations.",
      "fieldConfig": {
        "defaults": {
          "thresholds": {
            "steps": [
              {
                "color": "light-blue",
                "value": null
              },
              {
                "color": "light-yellow",
                "value": 0.8
              },
              {
                "color": "light-red",
                "value": 0.9
              }
            ]
          },
          "unit": "bytes"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Mounted on"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 260
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Size"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 80
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Used"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 80
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Available"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 80
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Used, %"
            },
            "properties": [
              {
                "id": "custom.cellOptions",
                "value": {
                  "mode": "basic",
                  "type": "gauge",
                  "valueDisplayMode": "text"
                }
              },
              {
                "id": "max",
                "value": 1
              },
              {
                "id": "min",
                "value": 0
              },
              {
                "id": "unit",
                "value": "percentunit"
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 20
      },
      "id": 19,
      "pluginVersion": "v11.0.0",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "node_filesystem_size_bytes{asserts_env=~\"$env\", asserts_site=~\"$site\", fstype!=\"\", mountpoint!=\"\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}",
          "format": "table",
          "instant": true,
          "refId": "TOTAL"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "node_filesystem_avail_bytes{asserts_env=~\"$env\", asserts_site=~\"$site\", fstype!=\"\", mountpoint!=\"\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}",
          "format": "table",
          "instant": true,
          "legendFormat": "{{ mountpoint }} free",
          "refId": "FREE"
        }
      ],
      "title": "Disk space usage",
      "transformations": [
        {
          "id": "groupBy",
          "options": {
            "fields": {
              "Value #FREE": {
                "aggregations": [
                  "lastNotNull"
                ],
                "operation": "aggregate"
              },
              "Value #TOTAL": {
                "aggregations": [
                  "lastNotNull"
                ],
                "operation": "aggregate"
              },
              "mountpoint": {
                "aggregations": [],
                "operation": "groupby"
              }
            }
          }
        },
        {
          "id": "merge",
          "options": {}
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Used",
            "binary": {
              "left": "Value #TOTAL (lastNotNull)",
              "operator": "-",
              "reducer": "sum",
              "right": "Value #FREE (lastNotNull)"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Used, %",
            "binary": {
              "left": "Used",
              "operator": "/",
              "reducer": "sum",
              "right": "Value #TOTAL (lastNotNull)"
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {},
            "indexByName": {
              "Used": 3,
              "Used, %": 4,
              "Value #FREE (lastNotNull)": 2,
              "Value #TOTAL (lastNotNull)": 1,
              "mountpoint": 0
            },
            "renameByName": {
              "Value #FREE (lastNotNull)": "Available",
              "Value #TOTAL (lastNotNull)": "Size",
              "mountpoint": "Mounted on"
            }
          }
        },
        {
          "id": "sortBy",
          "options": {
            "fields": {},
            "sort": [
              {
                "desc": false,
                "field": "Mounted on"
              }
            ]
          }
        }
      ],
      "type": "table"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 0,
        "x": 0,
        "y": 28
      },
      "id": 20,
      "panels": [],
      "title": "Network",
      "type": "row"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${prometheus_datasource}"
      },
      "description": "Network traffic (bits per sec) measures data transmitted and received.",
      "fieldConfig": {
        "defaults": {
          "custom": {
            "axisCenteredZero": false,
            "axisLabel": "out(-) | in(+)",
            "fillOpacity": 30,
            "gradientMode": "opacity",
            "lineInterpolation": "smooth",
            "lineWidth": 2,
            "showPoints": "never"
          },
          "decimals": 1,
          "noValue": "No traffic",
          "unit": "bps"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byRegexp",
              "options": "/transmit|tx|out/"
            },
            "properties": [
              {
                "id": "custom.transform",
                "value": "negative-Y"
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 29
      },
      "id": 21,
      "options": {
        "legend": {
          "calcs": [],
          "displayMode": "list"
        },
        "tooltip": {
          "mode": "multi",
          "sort": "desc"
        }
      },
      "pluginVersion": "v11.0.0",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "irate(node_network_receive_bytes_total{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}[$__rate_interval])*8\n# only show interfaces that had traffic change at least once during selected dashboard interval:\nand\nincrease(\n    node_network_receive_bytes_total{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}[$__range]\n    ) > 0\n",
          "legendFormat": "{{ device }} received"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "irate(node_network_transmit_bytes_total{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}[$__rate_interval])*8\n# only show interfaces that had traffic change at least once during selected dashboard interval:\nand\nincrease(\n    node_network_transmit_bytes_total{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}[$__range]\n    ) > 0\n",
          "legendFormat": "{{ device }} transmitted"
        }
      ],
      "title": "Network traffic",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${prometheus_datasource}"
      },
      "description": "**Network errors**:\n\nNetwork errors refer to issues that occur during the transmission of data across a network. \n\nThese errors can result from various factors, including physical issues, jitter, collisions, noise and interference.\n\nMonitoring network errors is essential for diagnosing and resolving issues, as they can indicate problems with network hardware or environmental factors affecting network quality.\n\n**Dropped packets**:\n\nDropped packets occur when data packets traveling through a network are intentionally discarded or lost due to congestion, resource limitations, or network configuration issues. \n\nCommon causes include network congestion, buffer overflows, QoS settings, and network errors, as corrupted or incomplete packets may be discarded by receiving devices.\n\nDropped packets can impact network performance and lead to issues such as degraded voice or video quality in real-time applications.\n",
      "fieldConfig": {
        "defaults": {
          "custom": {
            "axisCenteredZero": false,
            "axisLabel": "out(-) | in(+)",
            "fillOpacity": 30,
            "gradientMode": "opacity",
            "lineInterpolation": "smooth",
            "lineWidth": 2,
            "showPoints": "never"
          },
          "decimals": 1,
          "noValue": "No errors",
          "unit": "pps"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byRegexp",
              "options": "/transmit|tx|out/"
            },
            "properties": [
              {
                "id": "custom.transform",
                "value": "negative-Y"
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 29
      },
      "id": 22,
      "options": {
        "legend": {
          "calcs": [],
          "displayMode": "list"
        },
        "tooltip": {
          "mode": "multi",
          "sort": "desc"
        }
      },
      "pluginVersion": "v11.0.0",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "irate(node_network_transmit_errs_total{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}[$__rate_interval])>0",
          "legendFormat": "{{ device }} errors transmitted"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "irate(node_network_receive_errs_total{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}[$__rate_interval])>0",
          "legendFormat": "{{ device }} errors received"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "irate(node_network_transmit_drop_total{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}[$__rate_interval])>0",
          "legendFormat": "{{ device }} transmitted dropped"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${prometheus_datasource}"
          },
          "expr": "irate(node_network_receive_drop_total{asserts_env=~\"$env\", asserts_site=~\"$site\", job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\",instance=~\"$instance\"}[$__rate_interval])>0",
          "legendFormat": "{{ device }} received dropped"
        }
      ],
      "title": "Network errors and dropped packets",
      "type": "timeseries"
    }
  ],
  "refresh": "30s",
  "schemaVersion": 39,
  "tags": [
    "linux-node-integration"
  ],
  "templating": {
    "list": [
      {
        "allValue": ".*",
        "datasource": {
          "type": "prometheus",
          "uid": "${prometheus_datasource}"
        },
        "hide": 2,
        "includeAll": true,
        "label": "Asserts environment",
        "multi": false,
        "name": "env",
        "query": "label_values(asserts:mixin_workload_job, asserts_env)",
        "refresh": 2,
        "sort": 1,
        "type": "query"
      },
      {
        "allValue": ".*",
        "datasource": {
          "type": "prometheus",
          "uid": "${prometheus_datasource}"
        },
        "hide": 2,
        "includeAll": true,
        "label": "Asserts site",
        "multi": false,
        "name": "site",
        "query": "label_values(asserts:mixin_workload_job{asserts_env=~\"$env\"}, asserts_site)",
        "refresh": 2,
        "sort": 1,
        "type": "query"
      },
      {
        "label": "Prometheus data source",
        "name": "prometheus_datasource",
        "query": "prometheus",
        "regex": "(?!grafanacloud-usage|grafanacloud-ml-metrics).+",
        "type": "datasource"
      },
      {
        "allValue": ".*",
        "datasource": {
          "type": "prometheus",
          "uid": "${prometheus_datasource}"
        },
        "includeAll": true,
        "label": "Cluster",
        "multi": true,
        "name": "cluster",
        "query": "label_values(node_uname_info{job=~\"integrations/(node_exporter|unix)\"}, cluster)",
        "refresh": 2,
        "sort": 1,
        "type": "query"
      },
      {
        "allValue": ".+",
        "datasource": {
          "type": "prometheus",
          "uid": "${prometheus_datasource}"
        },
        "includeAll": true,
        "label": "Job",
        "multi": true,
        "name": "job",
        "query": "label_values(node_uname_info{job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\"}, job)",
        "refresh": 2,
        "sort": 1,
        "type": "query"
      },
      {
        "allValue": ".+",
        "datasource": {
          "type": "prometheus",
          "uid": "${prometheus_datasource}"
        },
        "includeAll": false,
        "label": "Instance",
        "multi": false,
        "name": "instance",
        "query": "label_values(node_uname_info{job=~\"integrations/(node_exporter|unix)\",cluster=~\"$cluster\",job=~\"$job\"}, instance)",
        "refresh": 2,
        "sort": 1,
        "type": "query"
      },
      {
        "hide": 2,
        "label": "Loki data source",
        "name": "loki_datasource",
        "query": "loki",
        "regex": "(?!grafanacloud.+usage-insights|grafanacloud.+alert-state-history).+",
        "type": "datasource"
      }
    ]
  },
  "time": {
    "from": "now-30m",
    "to": "now"
  },
  "timezone": "default",
  "title": "Linux node / overview",
  "uid": "nodes",
  "version": 1
}
